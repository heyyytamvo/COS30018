!pip install mplfinance

stock_data = pd.read_csv('AMZN_2024-02-20.csv', parse_dates=['Date'], header=0, index_col='Date')
stock_data.drop('adjclose', axis=1, inplace=True)
stock_data.to_csv('AMZN_2024-02-20.csv')

# Read the newly saved CSV file
updated_stock_data = pd.read_csv('AMZN_2024-02-20.csv', parse_dates=['Date'], header=0, index_col='Date')

# Print the column names
print(updated_stock_data.columns)

import pandas as pd
import mplfinance as mpf

def plot_candlestick(data, n_days=1):
    """
    Plots a candlestick chart for stock market financial data.

    Args:
        data (pd.DataFrame): A DataFrame containing OHLC (Open, High, Low, Close) data.
        n_days (int): Number of trading days per candlestick (default is 1).

    Returns:
        None (displays the chart)
    """
    # Set the date as the index (if not already done)
    data.set_index('Date', inplace=True)

    # Resample the data to n_days frequency
    resampled_data = data.resample(f'{n_days}D').agg({
        'Open': 'first',
        'High': 'max',
        'Low': 'min',
        'Close': 'last',
        'Volume': 'sum'
    })

    # Create the candlestick chart
    mpf.plot(resampled_data, type='candle', style='yahoo', title='Stock Price', ylabel='Price')

# Example usage:
if __name__ == '__main__':
    # Load your stock market data (replace with your own dataset)
    stock_data = pd.read_csv('AMZN_2024-02-20.csv', parse_dates=['Date'], header=0)

    # Call the function with your data and specify n_days (e.g., n_days=7 for weekly candles)
    plot_candlestick(stock_data, n_days=7)

